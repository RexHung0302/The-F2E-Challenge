(function(t){function e(e){for(var a,o,r=e[0],c=e[1],d=e[2],l=0,u=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);p&&p(e);while(u.length)u.shift()();return s.push.apply(s,d||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},s=[];function o(t){return r.p+"js/"+({masksMap:"masksMap"}[t]||t)+"."+{masksMap:"7ba247d5"}[t]+".js"}function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(t){var e=[],n=i[t];if(0!==n)if(n)e.push(n[2]);else{var a=new Promise((function(e,a){n=i[t]=[e,a]}));e.push(n[2]=a);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=o(t);var d=new Error;s=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=i[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",d.name="ChunkLoadError",d.type=a,d.request=s,n[1](d)}i[t]=void 0}};var l=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=d;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"position-relative w-100 h-100",attrs:{id:"app"}},[n("router-view")],1)},s=[],o=(n("5c0b"),n("2877")),r={},c=Object(o["a"])(r,i,s,!1,null,null,null),d=c.exports,l=(n("c740"),n("4160"),n("b0c0"),n("ac1f"),n("466d"),n("159b"),n("96cf"),n("1da1")),p=n("2f62"),u=n("2ef0"),h=n("3d20"),m=n("bc3a"),v="https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json";a["a"].use(p["a"]);var f=new p["a"].Store({state:{masksApiData:[],storeList:[],center:[24.1447929,120.6361618],isPhone:!1,sideBarHidden:null,zoom:10},mutations:{setIsPhone:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.isPhone=e,!0===e&&(t.sideBarHidden=!0)},setSideBar:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hidden";switch(e){case"hidden":t.sideBarHidden=!0;break;case"show":t.sideBarHidden=!1;break;default:break}},setMasksApiData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];u.forEach(e.features,(function(t,e){var a={type:t.type,properties:t.properties,geometry:{type:t.geometry.type,coordinates:t.geometry.coordinates.reverse()}};n.push(a)})),t.masksApiData=n,t.storeList=n,h.close()},setStoreList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.keywordText,a=e.maskCondition,i=[],s="0";s=""!==n&&null!==n&&void 0!==n||0!==a.length?""===n&&null===n&&void 0===n||0!==a.length?""!==n&&null!==n&&void 0!==n||0===a.length?"3":"2":"1":"0";var o=!1,r=!1,c=!1,d="0";switch(s){case"0":i=u.cloneDeep(t.masksApiData);break;case"1":u.findIndex(t.masksApiData,(function(t){(t.properties.name.match(n)||t.properties.address.match(n)||t.properties.county.match(n)||t.properties.town.match(n)||t.properties.cunli.match(n))&&i.push(t)}));break;case"2":u.findIndex(a,(function(t){"1"==t&&(o=!0),"2"==t&&(r=!0),"3"==t&&(c=!0)})),d=!0===o||!0===r&&!0===c?"0":!1===o&&!0===r&&!1===c?"1":!1===o&&!1===r&&!0===c?"2":"3",u.findIndex(t.masksApiData,(function(t){"0"===d?(t.properties.mask_adult>0||t.properties.mask_child>0)&&i.push(t):"1"===d?t.properties.mask_adult>0&&i.push(t):"2"===d?t.properties.mask_child>0&&i.push(t):i.push(t)}));break;case"3":u.findIndex(a,(function(t){"1"==t&&(o=!0),"2"==t&&(r=!0),"3"==t&&(c=!0)})),d=!0===o||!0===r&&!0===c?"0":!1===o&&!0===r&&!1===c?"1":!1===o&&!1===r&&!0===c?"2":"3",u.findIndex(t.masksApiData,(function(t){"0"===d?(t.properties.name.match(n)||t.properties.address.match(n)||t.properties.county.match(n)||t.properties.town.match(n)||t.properties.cunli.match(n))&&(t.properties.mask_adult>0||t.properties.mask_child>0)&&i.push(t):"1"===d?(t.properties.name.match(n)||t.properties.address.match(n)||t.properties.county.match(n)||t.properties.town.match(n)||t.properties.cunli.match(n))&&t.properties.mask_adult>0&&i.push(t):"2"===d?(t.properties.name.match(n)||t.properties.address.match(n)||t.properties.county.match(n)||t.properties.town.match(n)||t.properties.cunli.match(n))&&t.properties.mask_child>0&&i.push(t):i.push(t)}));break;default:i=u.cloneDeep(t.masksApiData);break}t.storeList=i,t.center=[i[0].geometry.coordinates[0],i[0].geometry.coordinates[1]]},setCenterLoction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[24.1447929,120.6361618];t.center=[e[0],e[1]],t.zoom=17}},actions:{checkDevice:function(t){var e,n=t.commit,a=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);e=!!(a&&null!==a&&a.length>0),n("setIsPhone",e)},getMasksApi:function(t){var e=t.commit;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:m.get(v).then((function(t){e("setMasksApiData",t.data)})).catch((function(t){console.log(t)}));case 1:case"end":return t.stop()}}),t)})))()},searchStore:function(t,e){var n=t.commit;n("setStoreList",e)},setCenterLoction:function(t,e){var n=t.commit;n("setCenterLoction",e)}}}),k=(n("d3b7"),n("8c4f")),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"masksMap position-relative w-100 h-100"},[n("div",{staticClass:"contentDiv w-100 h-100"},[n("div",{staticClass:"sidePartDiv",class:{"sidePartDiv-hidden":t.sideBarHidden}},[n("sidePart")],1),n("div",{staticClass:"mainPartDiv h-100"},[n("router-view")],1)])])},b=[],w=n("5530"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sidePart position-relatuve"},[a("div",{staticClass:"upPart"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.isPhone&&t.windowWidth<700&&!t.sideBarHidden,expression:"isPhone && windowWidth < 700 && !sideBarHidden"}],staticClass:"icon icon-arrowLeft",attrs:{src:n("82aa")},on:{click:function(e){return t.siderBarHandler("hidden")}}}),a("span",{staticClass:"d-block"},[t._v(t._s(t._f("filterDate")(new Date)))]),a("span",{staticClass:"d-block upPart__weekText"},[t._v(t._s(t._f("filterWeek")(new Date)))]),a("span",{staticClass:"upPart__decText"},[t._v(" 身分證末一碼 "),a("span",{staticClass:"redRemind"},[t._v(t._s(t._f("filterEvenOdd")(new Date))+" ")]),t._v("字號者可購買口罩")]),a("small",{staticClass:"d-block upPart__remindText"},[t._v("※一週限購一次，每次一人限購兩片")])]),a("div",{staticClass:"downPart"},[a("div",{staticClass:"downPart__firstDiv"},[a("div",{staticClass:"searchPart"},[a("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keywordText,expression:"keywordText",modifiers:{trim:!0}}],staticClass:"form-control serchInput",attrs:{placeholder:"搜尋區域 , 地址 , 藥局"},domProps:{value:t.keywordText},on:{input:function(e){e.target.composing||(t.keywordText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),a("img",{staticClass:"searchIcon cursor-pointer",attrs:{src:n("7c0a")},on:{click:t.searchHandle}})]),a("div",{staticClass:"selectPart"},[a("div",{staticClass:"conditionDiv"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.maskCondition,expression:"maskCondition"}],staticClass:"form-check-input conditionDiv__cheekBoxInput conditionDiv__cheekBoxInput_1 d-none",attrs:{type:"checkbox",id:"select_1",value:"1"},domProps:{checked:Array.isArray(t.maskCondition)?t._i(t.maskCondition,"1")>-1:t.maskCondition},on:{change:[function(e){var n=t.maskCondition,a=e.target,i=!!a.checked;if(Array.isArray(n)){var s="1",o=t._i(n,s);a.checked?o<0&&(t.maskCondition=n.concat([s])):o>-1&&(t.maskCondition=n.slice(0,o).concat(n.slice(o+1)))}else t.maskCondition=i},t.searchHandle]}}),a("label",{staticClass:"conditionDiv__label cursor-pointer",attrs:{for:"select_1"}},[t._v("所有口罩")])]),a("div",{staticClass:"conditionDiv"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.maskCondition,expression:"maskCondition"}],staticClass:"form-check-input conditionDiv__cheekBoxInput conditionDiv__cheekBoxInput_2 d-none",attrs:{type:"checkbox",id:"select_2",value:"2"},domProps:{checked:Array.isArray(t.maskCondition)?t._i(t.maskCondition,"2")>-1:t.maskCondition},on:{change:[function(e){var n=t.maskCondition,a=e.target,i=!!a.checked;if(Array.isArray(n)){var s="2",o=t._i(n,s);a.checked?o<0&&(t.maskCondition=n.concat([s])):o>-1&&(t.maskCondition=n.slice(0,o).concat(n.slice(o+1)))}else t.maskCondition=i},t.searchHandle]}}),a("label",{staticClass:"conditionDiv__label cursor-pointer",attrs:{for:"select_2"}},[t._v("成人口罩")])]),a("div",{staticClass:"conditionDiv"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.maskCondition,expression:"maskCondition"}],staticClass:"form-check-input conditionDiv__cheekBoxInput conditionDiv__cheekBoxInput_3 d-none",attrs:{type:"checkbox",id:"select_3",value:"3"},domProps:{checked:Array.isArray(t.maskCondition)?t._i(t.maskCondition,"3")>-1:t.maskCondition},on:{change:[function(e){var n=t.maskCondition,a=e.target,i=!!a.checked;if(Array.isArray(n)){var s="3",o=t._i(n,s);a.checked?o<0&&(t.maskCondition=n.concat([s])):o>-1&&(t.maskCondition=n.slice(0,o).concat(n.slice(o+1)))}else t.maskCondition=i},t.searchHandle]}}),a("label",{staticClass:"conditionDiv__label cursor-pointer",attrs:{for:"select_3"}},[t._v("兒童口罩")])])]),a("div",{staticClass:"remindPart"},[a("span",[t._v("目前尚有 "),a("span",{staticClass:"remindPart__storeNumberText"},[t._v(t._s(t.storeList?t.storeList.length:"0")+" ")]),t._v("家藥局供應口罩")])])]),t._l(t.storeList,(function(e,n){return a("div",{key:n,staticClass:"downPart__storeDiv position-relative",class:{"downPart__storeDiv-hasAdultMasks":e.properties.mask_adult>0,"downPart__storeDiv-hasChildMasks":e.properties.mask_child>0}},[a("div",{staticClass:"storeInfoPart"},[a("span",{staticClass:"d-block storeName"},[t._v(t._s(e.properties.name))]),a("span",{staticClass:"d-block storeAddress"},[t._v(t._s(e.properties.address))]),a("span",{staticClass:"d-block storePhone"},[t._v(t._s(e.properties.phone))]),a("span",{staticClass:"moreInfo btn btn-primary btn-sm mr-2 mt-2",on:{click:function(n){return t.showInfo(e.properties)}}},[t._v("詳細資訊")]),a("span",{staticClass:"moreInfo btn btn-info btn-sm mt-2",on:{click:function(n){return t.jumpToTarget(e.geometry.coordinates)}}},[t._v("目標地")])]),a("div",{staticClass:"storeMasksInfoPart mt-2"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.properties.mask_adult>0,expression:"store.properties.mask_adult > 0"}],staticClass:"storeMasksInfoDiv storeMasksInfoDiv-adult"},[a("span",[t._v("成人口罩 "+t._s(e.properties.mask_adult)+"個")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.properties.mask_child>0,expression:"store.properties.mask_child > 0"}],staticClass:"storeMasksInfoDiv storeMasksInfoDiv-child"},[a("span",[t._v("兒童口罩 "+t._s(e.properties.mask_child)+"個")])]),a("div",{directives:[{name:"show",rawName:"v-show",value:0===e.properties.mask_adult&&0===e.properties.mask_child,expression:"store.properties.mask_adult === 0 && store.properties.mask_child === 0"}],staticClass:"storeMasksInfoDiv storeMasksInfoDiv-none"},[a("span",[t._v("口罩缺貨中")])])])])}))],2)])},C=[],g=(n("99af"),n("c975"),n("25f0"),n("3d20")),y=n.n(g),D=(n("2ef0"),{name:"sidePart",data:function(){return{nearbyStoreNumber:null,keywordText:null,maskCondition:[],windowWidth:window.innerWidth}},filters:{filterDate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t,n=e.getFullYear(),a=e.getMonth()+1<10?0+(e.getMonth()+1).toString():e.getMonth()+1,i=e.getDate()<10?0+e.getDate().toString():e.getDate();return"".concat(n," - ").concat(a," - ").concat(i)},filterWeek:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDay().toString();switch(e){case"0":return"星期日";case"1":return"星期一";case"2":return"星期二";case"3":return"星期三";case"4":return"星期四";case"5":return"星期五";case"6":return"星期六";default:return"星期？"}},filterEvenOdd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDay().toString();switch(e){case"1":case"3":case"5":return"基數";case"2":case"4":case"6":return"偶數";default:return"不限"}}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth}))},methods:{showInfo:function(t){y.a.fire({title:"".concat(t.name," 詳細資訊"),html:'<div class="row" style="align-items: flex-start;">\n        <div class="col-3 mt-3">電話</div>\n        <div class="col-9 text-left mt-3">'.concat(t.phone?t.phone:"-",'</div>\n        <hr>\n        <div class="col-3 mt-3">地址</div>\n        <div class="col-9 text-left mt-3">').concat(t.address?t.address:"-",'</div>\n        <hr>\n        <div class="col-3 mt-3">營業時間</div>\n        <div class="col-9 text-left mt-3">\n        <table width="100%" class="text-center table table-striped table-bordered" style="font-size: .8rem;">\n        <thead class="thead-dark">\n        <tr>\n        <th>營業時間</th>\n        <th>一</th>\n        <th>二</th>\n        <th>三</th>\n        <th>四</th>\n        <th>五</th>\n        <th>六</th>\n        <th>日</th>\n        </tr>\n        <tr>\n        </thead>\n        <th>上午</th>\n        <td>').concat(-1!==t.available.indexOf("星期一上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期二上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期三上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期四上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期五上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期六上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期日上午看診")?"o":"x","</td>\n        </tr>\n        <th>下午</th>\n        <td>").concat(-1!==t.available.indexOf("星期一下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期二下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期三下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期四下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期五下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期六下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期日下午看診")?"o":"x","</td>\n        </tr>\n        <th>晚上</th>\n        <td>").concat(-1!==t.available.indexOf("星期一晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期二晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期三晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期四晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期五晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期六晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期日晚上看診")?"o":"x",'</td>\n        </tr>\n        </table>\n        </div>\n        <hr>\n        <div class="col-3 mt-3">備註</div>\n        <div class="col-9 text-left mt-3">').concat(t.note?t.note:"無","</div>\n        <hr>\n        </div>"),confirmButtonText:"關閉",showCancelButton:!1,confirmButtonColor:"#000000",heightAuto:!1})},searchHandle:function(){var t=this,e={keywordText:t.keywordText,maskCondition:t.maskCondition};t.$store.dispatch("searchStore",e)},jumpToTarget:function(t){var e=this;e.$store.dispatch("setCenterLoction",t)},siderBarHandler:function(t){var e=this;e.$store.commit("setSideBar",t)}},computed:Object(w["a"])({},Object(p["b"])(["masksApiData","storeList","isPhone","sideBarHidden"]))}),P=D,O=Object(o["a"])(P,x,C,!1,null,"7851cc67",null),M=O.exports,I=n("3d20"),A={name:"masksMap",components:{sidePart:M},created:function(){I.fire({title:"載入中",showCancelButton:!1,showConfirmButton:!1,heightAuto:!1,onBeforeOpen:function(){I.showLoading()}}),this.$store.dispatch("checkDevice"),this.$store.dispatch("getMasksApi")},computed:Object(w["a"])({},Object(p["b"])(["sideBarHidden"]))},B=A,j=Object(o["a"])(B,_,b,!1,null,null,null),T=j.exports;a["a"].use(k["a"]);var S=new k["a"]({routes:[{path:"*",redirect:"/masksMap/index"},{path:"/masksMap",redirect:"/masksMap/index",component:T,children:[{path:"/masksMap/index",name:"index",component:function(){return n.e("masksMap").then(n.bind(null,"1ac9"))}}]}]});n("e11e"),n("6cc5"),n("98e8");a["a"].config.productionTip=!1,delete L.Icon.Default.prototype._getIconUrl,L.Icon.Default.mergeOptions({iconRetinaUrl:n("584d"),iconUrl:n("6397"),shadowUrl:n("e2b9")}),new a["a"]({router:S,store:f,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var a=n("9c0c"),i=n.n(a);i.a},"7c0a":function(t,e,n){t.exports=n.p+"img/Icon_search.7bf22ceb.svg"},"82aa":function(t,e,n){t.exports=n.p+"img/arrowLeft.f3f5214b.svg"},"9c0c":function(t,e,n){}});
//# sourceMappingURL=app.c8b6516f.js.map