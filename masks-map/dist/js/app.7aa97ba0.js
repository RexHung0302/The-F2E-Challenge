(function(t){function e(e){for(var n,i,r=e[0],c=e[1],d=e[2],l=0,u=[];l<r.length;l++)i=r[l],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&u.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);p&&p(e);while(u.length)u.shift()();return o.push.apply(o,d||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var c=a[i];0!==s[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},o=[];function i(t){return r.p+"js/"+({masksMap:"masksMap"}[t]||t)+"."+{masksMap:"eb91c054"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=s[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=s[t]=[e,n]}));e.push(a[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=i(t);var d=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var a=s[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",d.name="ChunkLoadError",d.type=n,d.request=o,a[1](d)}s[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var p=d;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"position-relative w-100 h-100",attrs:{id:"app"}},[a("router-view")],1)},o=[],i=(a("5c0b"),a("2877")),r={},c=Object(i["a"])(r,s,o,!1,null,null,null),d=c.exports,l=(a("c740"),a("4160"),a("b0c0"),a("ac1f"),a("466d"),a("159b"),a("96cf"),a("1da1")),p=a("2f62"),u=a("2ef0"),m=a("3d20"),h=a("bc3a"),v="https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json";n["a"].use(p["a"]);var f=new p["a"].Store({state:{masksApiData:[],storeList:[],center:[24.1447929,120.6361618]},mutations:{setMasksApiData:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];u.forEach(e.features,(function(t,e){var n={type:t.type,properties:t.properties,geometry:{type:t.geometry.type,coordinates:t.geometry.coordinates.reverse()}};a.push(n)})),t.masksApiData=a,t.storeList=a,m.close()},setStoreList:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.keywordText,n=e.maskCondition,s=[],o="0";o=""!==a&&null!==a&&void 0!==a||0!==n.length?""===a&&null===a&&void 0===a||0!==n.length?""!==a&&null!==a&&void 0!==a||0===n.length?"3":"2":"1":"0";var i=!1,r=!1,c=!1,d="0";switch(o){case"0":s=u.cloneDeep(t.masksApiData);break;case"1":u.findIndex(t.masksApiData,(function(t){(t.properties.name.match(a)||t.properties.address.match(a)||t.properties.county.match(a)||t.properties.town.match(a)||t.properties.cunli.match(a))&&s.push(t)}));break;case"2":u.findIndex(n,(function(t){"1"==t&&(i=!0),"2"==t&&(r=!0),"3"==t&&(c=!0)})),d=!0===i||!0===r&&!0===c?"0":!1===i&&!0===r&&!1===c?"1":!1===i&&!1===r&&!0===c?"2":"3",u.findIndex(t.masksApiData,(function(t){"0"===d?(t.properties.mask_adult>0||t.properties.mask_child>0)&&s.push(t):"1"===d?t.properties.mask_adult>0&&s.push(t):"2"===d?t.properties.mask_child>0&&s.push(t):s.push(t)}));break;case"3":u.findIndex(n,(function(t){"1"==t&&(i=!0),"2"==t&&(r=!0),"3"==t&&(c=!0)})),d=!0===i||!0===r&&!0===c?"0":!1===i&&!0===r&&!1===c?"1":!1===i&&!1===r&&!0===c?"2":"3",u.findIndex(t.masksApiData,(function(t){"0"===d?(t.properties.name.match(a)||t.properties.address.match(a)||t.properties.county.match(a)||t.properties.town.match(a)||t.properties.cunli.match(a))&&(t.properties.mask_adult>0||t.properties.mask_child>0)&&s.push(t):"1"===d?(t.properties.name.match(a)||t.properties.address.match(a)||t.properties.county.match(a)||t.properties.town.match(a)||t.properties.cunli.match(a))&&t.properties.mask_adult>0&&s.push(t):"2"===d?(t.properties.name.match(a)||t.properties.address.match(a)||t.properties.county.match(a)||t.properties.town.match(a)||t.properties.cunli.match(a))&&t.properties.mask_child>0&&s.push(t):s.push(t)}));break;default:s=u.cloneDeep(t.masksApiData);break}t.storeList=s,t.center=[s[0].geometry.coordinates[0],s[0].geometry.coordinates[1]]},setCenterLoction:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[24.1447929,120.6361618];t.center=[e[0],e[1]]}},actions:{getMasksApi:function(t){var e=t.commit;return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:h.get(v).then((function(t){e("setMasksApiData",t.data)})).catch((function(t){console.log(t)}));case 1:case"end":return t.stop()}}),t)})))()},searchStore:function(t,e){var a=t.commit;a("setStoreList",e)},setCenterLoction:function(t,e){var a=t.commit;a("setCenterLoction",e)}}}),k=(a("d3b7"),a("8c4f")),_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"masksMap position-relative w-100 h-100"},[a("div",{staticClass:"contentDiv w-100 h-100"},[a("div",{staticClass:"sidePartDiv h-100"},[a("sidePart")],1),a("div",{staticClass:"mainPartDiv h-100"},[a("router-view")],1)])])},b=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidePart position-relatuve h-100"},[n("div",{staticClass:"upPart"},[n("span",{staticClass:"d-block"},[t._v(t._s(t._f("filterDate")(new Date)))]),n("span",{staticClass:"d-block upPart__weekText"},[t._v(t._s(t._f("filterWeek")(new Date)))]),n("span",{staticClass:"upPart__decText"},[t._v(" 身分證末一碼 "),n("span",{staticClass:"redRemind"},[t._v(t._s(t._f("filterEvenOdd")(new Date))+" ")]),t._v("字號者可購買口罩")]),n("small",{staticClass:"d-block upPart__remindText"},[t._v("※一週限購一次，每次一人限購兩片")])]),n("div",{staticClass:"downPart"},[n("div",{staticClass:"downPart__firstDiv"},[n("div",{staticClass:"searchPart"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.keywordText,expression:"keywordText",modifiers:{trim:!0}}],staticClass:"form-control serchInput",attrs:{placeholder:"搜尋區域 , 地址 , 藥局"},domProps:{value:t.keywordText},on:{keyup:t.searchHandle,input:function(e){e.target.composing||(t.keywordText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),n("img",{staticClass:"searchIcon cursor-pointer",attrs:{src:a("7c0a")}})]),n("div",{staticClass:"selectPart"},[n("div",{staticClass:"conditionDiv"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.maskCondition,expression:"maskCondition"}],staticClass:"form-check-input conditionDiv__cheekBoxInput conditionDiv__cheekBoxInput_1 d-none",attrs:{type:"checkbox",id:"select_1",value:"1"},domProps:{checked:Array.isArray(t.maskCondition)?t._i(t.maskCondition,"1")>-1:t.maskCondition},on:{change:[function(e){var a=t.maskCondition,n=e.target,s=!!n.checked;if(Array.isArray(a)){var o="1",i=t._i(a,o);n.checked?i<0&&(t.maskCondition=a.concat([o])):i>-1&&(t.maskCondition=a.slice(0,i).concat(a.slice(i+1)))}else t.maskCondition=s},t.searchHandle]}}),n("label",{staticClass:"conditionDiv__label cursor-pointer",attrs:{for:"select_1"}},[t._v("所有口罩")])]),n("div",{staticClass:"conditionDiv"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.maskCondition,expression:"maskCondition"}],staticClass:"form-check-input conditionDiv__cheekBoxInput conditionDiv__cheekBoxInput_2 d-none",attrs:{type:"checkbox",id:"select_2",value:"2"},domProps:{checked:Array.isArray(t.maskCondition)?t._i(t.maskCondition,"2")>-1:t.maskCondition},on:{change:[function(e){var a=t.maskCondition,n=e.target,s=!!n.checked;if(Array.isArray(a)){var o="2",i=t._i(a,o);n.checked?i<0&&(t.maskCondition=a.concat([o])):i>-1&&(t.maskCondition=a.slice(0,i).concat(a.slice(i+1)))}else t.maskCondition=s},t.searchHandle]}}),n("label",{staticClass:"conditionDiv__label cursor-pointer",attrs:{for:"select_2"}},[t._v("成人口罩")])]),n("div",{staticClass:"conditionDiv"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.maskCondition,expression:"maskCondition"}],staticClass:"form-check-input conditionDiv__cheekBoxInput conditionDiv__cheekBoxInput_3 d-none",attrs:{type:"checkbox",id:"select_3",value:"3"},domProps:{checked:Array.isArray(t.maskCondition)?t._i(t.maskCondition,"3")>-1:t.maskCondition},on:{change:[function(e){var a=t.maskCondition,n=e.target,s=!!n.checked;if(Array.isArray(a)){var o="3",i=t._i(a,o);n.checked?i<0&&(t.maskCondition=a.concat([o])):i>-1&&(t.maskCondition=a.slice(0,i).concat(a.slice(i+1)))}else t.maskCondition=s},t.searchHandle]}}),n("label",{staticClass:"conditionDiv__label cursor-pointer",attrs:{for:"select_3"}},[t._v("兒童口罩")])])]),n("div",{staticClass:"remindPart"},[n("span",[t._v("目前尚有 "),n("span",{staticClass:"remindPart__storeNumberText"},[t._v(t._s(t.storeList?t.storeList.length:"0")+" ")]),t._v("家藥局供應口罩")])])]),t._l(t.storeList,(function(e,a){return n("div",{key:a,staticClass:"downPart__storeDiv position-relative",class:{"downPart__storeDiv-hasAdultMasks":e.properties.mask_adult>0,"downPart__storeDiv-hasChildMasks":e.properties.mask_child>0}},[n("div",{staticClass:"storeInfoPart"},[n("span",{staticClass:"d-block storeName"},[t._v(t._s(e.properties.name))]),n("span",{staticClass:"d-block storeAddress"},[t._v(t._s(e.properties.address))]),n("span",{staticClass:"d-block storePhone"},[t._v(t._s(e.properties.phone))]),n("span",{staticClass:"moreInfo btn btn-primary btn-sm mr-2 mt-2",on:{click:function(a){return t.showInfo(e.properties)}}},[t._v("詳細資訊")]),n("span",{staticClass:"moreInfo btn btn-info btn-sm mt-2",on:{click:function(a){return t.jumpToTarget(e.geometry.coordinates)}}},[t._v("目標地")])]),n("div",{staticClass:"storeMasksInfoPart mt-2"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.properties.mask_adult>0,expression:"store.properties.mask_adult > 0"}],staticClass:"storeMasksInfoDiv storeMasksInfoDiv-adult"},[n("span",[t._v("成人口罩 "+t._s(e.properties.mask_adult)+"個")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.properties.mask_child>0,expression:"store.properties.mask_child > 0"}],staticClass:"storeMasksInfoDiv storeMasksInfoDiv-child"},[n("span",[t._v("兒童口罩 "+t._s(e.properties.mask_child)+"個")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:0===e.properties.mask_adult&&0===e.properties.mask_child,expression:"store.properties.mask_adult === 0 && store.properties.mask_child === 0"}],staticClass:"storeMasksInfoDiv storeMasksInfoDiv-none"},[n("span",[t._v("口罩缺貨中")])])])])}))],2)])},C=[],g=(a("99af"),a("c975"),a("25f0"),a("5530")),w=a("3d20"),y=a.n(w),D=(a("2ef0"),{name:"sidePart",data:function(){return{nearbyStoreNumber:null,keywordText:null,maskCondition:[]}},filters:{filterDate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t,a=e.getFullYear(),n=e.getMonth()+1<10?0+(e.getMonth()+1).toString():e.getMonth()+1,s=e.getDate()<10?0+e.getDate().toString():e.getDate();return"".concat(a," - ").concat(n," - ").concat(s)},filterWeek:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDay().toString();switch(e){case"0":return"星期日";case"1":return"星期一";case"2":return"星期二";case"3":return"星期三";case"4":return"星期四";case"5":return"星期五";case"6":return"星期六";default:return"星期？"}},filterEvenOdd:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getDay().toString();switch(e){case"1":case"3":case"5":return"基數";case"2":case"4":case"6":return"偶數";default:return"不限"}}},methods:{showInfo:function(t){console.log(t),y.a.fire({title:"".concat(t.name," 詳細資訊"),html:'<div class="row" style="align-items: flex-start;">\n        <div class="col-3 mt-3">電話</div>\n        <div class="col-9 text-left mt-3">'.concat(t.phone?t.phone:"-",'</div>\n        <hr>\n        <div class="col-3 mt-3">地址</div>\n        <div class="col-9 text-left mt-3">').concat(t.address?t.address:"-",'</div>\n        <hr>\n        <div class="col-3 mt-3">營業時間</div>\n        <div class="col-9 text-left mt-3">\n        <table width="100%" class="text-center table table-striped table-bordered" style="font-size: .8rem;">\n        <thead class="thead-dark">\n        <tr>\n        <th>營業時間</th>\n        <th>一</th>\n        <th>二</th>\n        <th>三</th>\n        <th>四</th>\n        <th>五</th>\n        <th>六</th>\n        <th>日</th>\n        </tr>\n        <tr>\n        </thead>\n        <th>上午</th>\n        <td>').concat(-1!==t.available.indexOf("星期一上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期二上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期三上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期四上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期五上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期六上午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期日上午看診")?"o":"x","</td>\n        </tr>\n        <th>下午</th>\n        <td>").concat(-1!==t.available.indexOf("星期一下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期二下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期三下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期四下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期五下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期六下午看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期日下午看診")?"o":"x","</td>\n        </tr>\n        <th>晚上</th>\n        <td>").concat(-1!==t.available.indexOf("星期一晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期二晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期三晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期四晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期五晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期六晚上看診")?"o":"x","</td>\n        <td>").concat(-1!==t.available.indexOf("星期日晚上看診")?"o":"x",'</td>\n        </tr>\n        </table>\n        </div>\n        <hr>\n        <div class="col-3 mt-3">備註</div>\n        <div class="col-9 text-left mt-3">').concat(t.note?t.note:"無","</div>\n        <hr>\n        </div>"),confirmButtonText:"關閉",showCancelButton:!1,confirmButtonColor:"#000000",heightAuto:!1})},searchHandle:function(){var t=this,e={keywordText:t.keywordText,maskCondition:t.maskCondition};t.$store.dispatch("searchStore",e)},jumpToTarget:function(t){var e=this;e.$store.dispatch("setCenterLoction",t)}},computed:Object(g["a"])({},Object(p["b"])(["masksApiData","storeList"]))}),O=D,P=Object(i["a"])(O,x,C,!1,null,"0b5bed8a",null),M=P.exports,A=a("3d20"),I={name:"masksMap",components:{sidePart:M},created:function(){A.fire({title:"載入中",showCancelButton:!1,showConfirmButton:!1,heightAuto:!1,onBeforeOpen:function(){A.showLoading()}}),this.$store.dispatch("getMasksApi")}},T=I,j=Object(i["a"])(T,_,b,!1,null,null,null),S=j.exports;n["a"].use(k["a"]);var B=new k["a"]({routes:[{path:"*",redirect:"/masksMap/index"},{path:"/masksMap",redirect:"/masksMap/index",component:S,children:[{path:"/masksMap/index",name:"index",component:function(){return a.e("masksMap").then(a.bind(null,"1ac9"))}}]}]});a("e11e"),a("6cc5"),a("98e8");n["a"].config.productionTip=!1,delete L.Icon.Default.prototype._getIconUrl,L.Icon.Default.mergeOptions({iconRetinaUrl:a("584d"),iconUrl:a("6397"),shadowUrl:a("e2b9")}),new n["a"]({router:B,store:f,render:function(t){return t(d)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var n=a("9c0c"),s=a.n(n);s.a},"7c0a":function(t,e,a){t.exports=a.p+"img/Icon_search.7bf22ceb.svg"},"9c0c":function(t,e,a){}});
//# sourceMappingURL=app.7aa97ba0.js.map